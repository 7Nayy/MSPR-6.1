server "default" {
  http {
    listen_address = "0.0.0.0:12345"
  }
}

metrics {
  wal_directory = "/tmp/grafana-agent-wal"

  global {
    scrape_interval = "30s"

    external_labels = {
      cluster     = "wildaware-prod"
      environment = "production"
    }
  }

  scrape "wildaware-app" {
    job_name = "wildaware-app"
    scrape_interval = "30s"

    static_configs {
      targets = ["wildaware-exporter:9090"]
    }
  }

  scrape "node-exporter" {
    job_name = "node-exporter"
    scrape_interval = "30s"

    static_configs {
      targets = ["node-exporter:9100"]
    }
  }

  remote_write {
    endpoint {
      url = "https://prometheus-prod-01-eu-west-0.grafana.net/api/prom/push"

      basic_auth {
        username = "1006356"
        password = "glc_eyJvIjoiMTAwNjM1NiIsIm4iOiJzdGFjay04MDcwMzktaG0tcmVhZC1tc3ByX21ldHJpY3MiLCJrIjoiODg2ME9GbDI3SG5LemtjMnVjaWM5RDgzIiwibSI6eyJyIjoicHJvZC1ldS13ZXN0LTIifX0="
      }
    }
  }
}
